OBJDIRS	+= parser

PARSERSRC	:= embedmysql.cc
PARSERPROGS	:= analyze load-schema print-back nz-foo EDBProxy2
PARSERPROGOBJS	:= $(patsubst %,$(OBJDIR)/parser/%,$(PARSERPROGS))

all:	$(PARSERPROGOBJS) $(OBJDIR)/libedbparser.so

$(PARSERPROGOBJS): %: %.o $(OBJDIR)/libedbparser.so
	$(CXX) $< -o $@ -ledbparser $(LDFLAGS)

EDBPARSER_OBJS	:= $(patsubst %.cc,$(OBJDIR)/parser/%.o,$(PARSERSRC))
$(OBJDIR)/libedbparser.so: $(EDBPARSER_OBJS) $(OBJDIR)/libedbutil.so
	$(CXX) -shared -o $@ $(EDBPARSER_OBJS) $(LDFLAGS) -ledbutil

# vim: set noexpandtab:
