#!/usr/bin/gnuplot

#set size 1,1
#"NimbusSanL-Regu" fontfile "uhvr8a.pfb"
set terminal postscript colour eps enhanced "Helvetica" 32

set output 'results-temp.ps'

set size 2,1
set origin 0,0
set multiplot


set border
set pointsize 1.3
set grid

#set terminal postscript enhanced color
#set output '| ps2pdf - plot.pdf'

set size 1,1
set origin 0,0

set key bottom right
set xlabel "No. of Clients"
set ytics 400
set ylabel "Queries / sec" offset +2,0
#set title "Throughput"
set pointsize 4
plot   'querytput.txt' using 1:4 title " Postgres" with linespoints lw 6, \
       'querytput.txt' using 1:6 title " CryptDB" with linespoints lw 6 lc rgb "black" # , \
      # 'querytput.txt' using 1:2 title " Unoptimized CryptDB" with linespoints lw 6
     

set key bottom right
set size 1,1
set origin 1,0
set xlabel "No. of Clients"
set ylabel "msecs / query" offset +2,0
set ytics 5
#set title "Latency"
set pointsize 4
plot  	'querytput.txt' using 1:5 title " Postgres" with linespoints lw 6 , \
	'querytput.txt' using 1:7 title " CryptDB" with linespoints lw 6  lc  rgb "black" # , \
              #    'querytput.txt' using 1:3 title " Unoptimized CryptDB" with linespoints lw 6
     


unset multiplot

system "epstopdf results-temp.ps"
system "ps2pdf14 -dPDFSETTINGS=/prepress results-temp.pdf queries1.pdf"
system "pdfcrop queries1.pdf queries.pdf"
system "rm results-temp.* queries1.pdf"

