\section{Conclusion}
\label{s:concl}

We presented \name{}, a system that provides practical and provable
confidentiality in the face of two significant threats---curious DBAs
and arbitrary compromises of the application server and
DBMS---confronting database-backed applications.  \name{} meets its
goals using three ideas: running queries efficiently over encrypted
data using a novel SQL-aware encryption strategy, dynamically
adjusting the encryption level using onions of encryption to minimize
the information revealed to the untrusted DBMS server, and chaining
encryption keys to user passwords in a way that allows only authorized
users to gain access to the same encrypted data.  The developer effort
required to express confidentiality policies for multi-user
applications is small, ranging between $11$ and $13$ unique
annotations of the application's database schema across three existing
applications (phpBB, HotCRP, and grad-apply).  The throughput penalty
of \name{} is modest, about $\tput$ for the TPC-C benchmark and $13\%$
for our synthetic phpBB workload.  Our results suggest that \name{} is
useful for applications where the ability to run confidentially over
an untrusted or outsourced infrastructure trumps achieving the highest
possible performance.

% This paper presented \name, a practical and novel system for ensuring
% data privacy on an untrusted SQL DBMS server.  \name uses three novel
% ideas to achieve its goal: an {\em SQL-aware encryption strategy},
% {\em adjustable query-based encryption}, and {\em onion encryption}.
% As part of \name's SQL-aware encryption strategy, we propose
% optimizations for existing cryptographic techniques, as well as a new
% cryptographic mechanism for private joins.  Our prototype of \name
% requires no changes to application or DBMS server code, and uses
% user-defined functions to perform cryptographic operations inside an
% existing DBMS engine, including both Postgres and MySQL\@.  Under a
% TPC-C workload, our prototype incurs a $\tput$ reduction in throughput
% compared to an unencrypted DBMS, making \name a practical option for
% privacy-sensitive data.

